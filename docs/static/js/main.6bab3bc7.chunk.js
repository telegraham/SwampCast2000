(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){e.exports=a(253)},139:function(e,t,a){},253:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),l=a(123),o=a.n(l),c=(a(139),a(55)),r=a(56),s=a(61),u=a(57),m=a(62),d=a(269),h=a(254),p="https://tempapi-backend.herokuapp.com";var f=a(133),y=a(132),g=a(58),k=a(262),E=a(267),v=a(260),w=a(263),b=a(124),_=a.n(b),O=function(e){return new Date-e<5e3?"now":_.a.ago(e,!1)+" ago"},j=function(e){return i.a.createElement(k.a,{height:390,domain:{x:e.range},domainPadding:{y:20}},i.a.createElement(E.a,{label:"Time",scale:"time",tickCount:e.tickCount,tickFormat:e.xTickFn||O,tickValues:e.tickValues?function(e){var t=(new Date).getTime();return e.map(function(e){return t-60*e*1e3})}(e.tickValues):e.tickValues,style:{axisLabel:{fontFamily:"Times New Roman"},tickLabels:{fontFamily:"Times New Roman"}}}),i.a.createElement(E.a,{dependentAxis:!0,style:{tickLabels:{fontFamily:"Times New Roman"}}}),i.a.createElement(v.a,{x:"time",y:"temperature",interpolation:"linear",data:e.data,style:{data:{stroke:"#fc0"}}}),i.a.createElement(w.a,{data:e.data,x:"time",y:"temperature",size:2,style:{data:{fill:"#f00"}}}),i.a.createElement(v.a,{x:"time",y:"humidity",interpolation:"linear",data:e.data,style:{data:{stroke:"#0ff"}}}),i.a.createElement(w.a,{data:e.data,x:"time",y:"humidity",size:2,style:{data:{fill:"#0e5"}}}))},D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={last_5_minutes:[],last_hour:[],today:[],last_week:[],last_month:[],last_year:[]},a.handleReceivedReading=function(e){var t=e.historical_reading;a.setState({last_5_minutes:Object(y.a)(a.state.last_5_minutes.slice(1)).concat([t]),isUpdate:!0})},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setReadings()}},{key:"componentDidUpdate",value:function(){this.props.location.slug!==this.state.locationSlug&&this.setReadings()}},{key:"setReadings",value:function(){var e,t,a=this,n=this.props.location.slug;e=n,t=function(e){a.setState(Object(f.a)({},e,{locationSlug:n,isUpdate:!1}))},fetch("".concat(p,"/locations/").concat(e,"/readings")).then(function(e){return e.json()}).then(t)}},{key:"data",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.state[e].map(function(e){return{humidity:e[t+"humidity"],temperature:(n=e[t+"temperature"],9*n/5+32),time:new Date(e[a+"time"]).getTime()};var n})}},{key:"timeOfDay",value:function(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes();return"".concat(a,":").concat(n>9?n:"0"+n)}},{key:"dayOfWeek",value:function(e){return D[new Date(e).getDay()]}},{key:"render",value:function(){var e=this.props.location;return i.a.createElement("section",null,i.a.createElement("hr",{className:"graph-divider-top"}),i.a.createElement("h2",null,this.props.location.name),i.a.createElement(g.ActionCable,{key:e.slug,channel:{channel:"ReadingsChannel",location:e.slug},onReceived:this.handleReceivedReading}),i.a.createElement("ol",{className:"charts"},i.a.createElement("li",null,i.a.createElement(j,{data:this.data("last_5_minutes"),isUpdate:this.state.isUpdate,tickValues:[5,4,3,2,1,0]})),i.a.createElement("li",null,i.a.createElement(j,{data:this.data("last_hour"),tickValues:[50,30,10]})),i.a.createElement("li",null,i.a.createElement(j,{data:this.data("today","mean_","start_"),xTickFn:this.timeOfDay})),i.a.createElement("li",null,i.a.createElement(j,{data:this.data("last_week","mean_","start_"),xTickFn:this.dayOfWeek,range:[(new Date).getTime()-6048e5,(new Date).getTime()],tickCount:4}))))}}]),t}(n.Component),x=function(e){var t=e.locations.map(function(e){return i.a.createElement("li",{key:e.slug},i.a.createElement(d.a,{to:"/"+e.slug},e.name))});return i.a.createElement("ol",{className:"locations"},t)},R=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("marquee",null,"Welcome to SwampCast 2000!!!"),i.a.createElement("p",null,"Select a location from the menu ^^"))},S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={locations:[]},a.renderLocation=function(e){var t=e.match.params.locationSlug,n=a.state.locations.find(function(e){return e.slug===t});return n?i.a.createElement(T,{location:n}):i.a.createElement(i.a.Fragment,null)},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;e=function(e){t.setState({locations:e})},fetch("".concat(p,"/locations")).then(function(e){return e.json()}).then(e)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(x,{locations:this.state.locations}),i.a.createElement("h1",{className:"header-main"},i.a.createElement(d.a,{to:"/"},"SwampCast 2000")),i.a.createElement(h.a,{exact:!0,path:"/",component:R}),i.a.createElement(h.a,{path:"/:locationSlug",render:this.renderLocation}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(265);o.a.render(i.a.createElement(g.ActionCableProvider,{url:"wss://tempapi-backend.herokuapp.com/cable"},i.a.createElement(F.a,null,i.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[134,2,1]]]);
//# sourceMappingURL=main.6bab3bc7.chunk.js.map