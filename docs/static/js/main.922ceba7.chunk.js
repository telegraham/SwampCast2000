(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(59)},36:function(e,t,n){},38:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(27),r=n.n(c),i=(n(36),n(9)),s=n(10),l=n(14),u=n(11),d=n(15),h=n(60),m=(n(38),"https://tempapi-backend.herokuapp.com");var p=n(62),f=function(e){var t=e.locations.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(p.a,{to:"/"+e.name.toLowerCase()},e.name))});return o.a.createElement("ol",{className:"locations"},t)},v=n(30),g=n(12),w=(n(48),n(23)),b=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={readings:[]},n.handleReceivedReading=function(e){n.setState({readings:Object(v.a)(n.state.readings).concat([e])})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setReadings()}},{key:"componentDidUpdate",value:function(){this.props.location.id!==this.state.locationId&&this.setReadings()}},{key:"setReadings",value:function(){var e,t,n=this,a=this.props.location.id;e=a,t=function(e){n.setState({locationId:a,readings:e})},fetch("".concat(m,"/locations/").concat(e,"/readings")).then(function(e){return e.json()}).then(t)}},{key:"processedData",value:function(){return console.log("pd"),this.state.readings.filter(function(e){return Date.parse(e.time)>154225314e4}).reduce(function(e,t){return t.data.forEach(function(n){e.push({y:n.temperature,x:Date.parse(t.time)+n.seconds})}),e},[])}},{key:"formatXAxis",value:function(e){return new Date(e).toLocaleString()}},{key:"render",value:function(){console.log(this.state.readings.length);var e=this.props.location;return o.a.createElement("section",null,o.a.createElement("h2",null,this.props.location.name),o.a.createElement(g.ActionCable,{key:e.id,channel:{channel:"ReadingsChannel",location:e.id},onReceived:this.handleReceivedReading}),o.a.createElement(w.b,{height:300,width:300},o.a.createElement(w.a,{data:this.processedData()})))}}]),t}(a.Component),E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={locations:[]},n.renderLocation=function(e){var t=e.match.params.location.toLowerCase(),a=n.state.locations.find(function(e){return e.name.toLowerCase()===t});return a?o.a.createElement(b,{location:a}):o.a.createElement(o.a.Fragment,null)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;e=function(e){t.setState({locations:e})},fetch("".concat(m,"/locations")).then(function(e){return e.json()}).then(e)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Temperature TCF"),o.a.createElement(f,{locations:this.state.locations}),o.a.createElement(h.a,{path:"/:location",render:this.renderLocation}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(61);r.a.render(o.a.createElement(g.ActionCableProvider,{url:"wss://tempapi-backend.herokuapp.com/cable"},o.a.createElement(k.a,null,o.a.createElement(E,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.922ceba7.chunk.js.map